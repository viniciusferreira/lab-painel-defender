<?php $__env->startSection('content'); ?>
<script>
	var _urlPayAccount="<?php echo e(preg_replace('#^https?://([^/])+#', '',route('account.pay.account',''))); ?>";
	var _urlPayAccounts="<?php echo e(preg_replace('#^https?://([^/])+#', '',route('account.pay.accounts',''))); ?>";
	var _account=<?php echo $account->toJson(); ?>;
</script>
<div id="result"></div>
<div class="tabbable" ng-controller="appContaController">
	<div class="container-fluid hidden startHidden">
		<div class="row">
			<div class="col-sm-12">
				<div class="panel panel-default">
					<div class="panel-heading">Contas não  quitadas</div>
					<div class="panel-body">
						<div class="panel panel-default">
							<div class="panel-body cloneButtons">
								<div class="row">
									<div class="col-sm-2">
										<select ng-model="qtdPage" name="quantidade" class="form-control" ng-change="filterPage('<?php echo e(route('account.unpaid')); ?>',qtdPage)">
											<optgroup label="Registros por página"></optgroup>
											<option value="10">10 registros por página</option>
											<option value="30">30 registros por página</option>
											<option value="50">50 registros por página</option>
											<option value="100">100 registros por página</option>
											<option value="500">500 registros por página</option>
											<option value="1000">1000 registros por página</option>
										</select>
									</div>
									<div class="col-sm-2">
										<button type="button" class="btn btn-primary" ng-click="quitar('all')">Quitar todas selecionadas</button>
									</div>
									<div class="col-sm-2"><input type="checkbox" ng-model="dataIndividual">Data individual</div>
									<div class="col-sm-2" ng-hide="dataIndividual">Data de quitação</div>
									<div class="col-sm-2" ng-hide="dataIndividual" ng-init="dataQuitar=(dataQuitar)?dataQuitar:'<?php echo e(date('d/m/Y')); ?>'"><input type="text" ng-model="dataQuitar" class="form-control" ></div>
									<div class="col-sm-1 pull-right text-right">
										<column class="listMenu">
										<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><span class="glyphicon glyphicon-list" aria-hidden="true"></span></a>
										<ul class="dropdown-menu">
											<li role="presentation" class="dropdown-header"><strong>Colunas</strong></li>
												<li><a href ng-click="hideidOS=!hideidOS"><span class="glyphicon glyphicon-ok" aria-hidden="true" ng-show="!hideidOS"></span> OS</a></li>
												<li><a href ng-click="hideNewAccount=!hideNewAccount"><span class="glyphicon glyphicon-ok" aria-hidden="true" ng-show="!hideNewAccount"></span> Reprogramar</a></li>
												<li role="presentation" class="dropdown-header">Desconto</li>
													<li><a href ng-click="hideDesconto=!hideDesconto"><span class="glyphicon glyphicon-ok" aria-hidden="true" ng-show="!hideDesconto"></span> Desconto</a></li>
												<li role="presentation" class="dropdown-header">Acréscimos</li>
													<li><a href ng-click="hideAdicional=!hideAdicional"><span class="glyphicon glyphicon-ok" aria-hidden="true" ng-show="!hideAdicional"></span> Adicional</a></li>
													<li><a href ng-click="hideJuros=!hideJuros"><span class="glyphicon glyphicon-ok" aria-hidden="true" ng-show="!hideJuros"></span> Juros</a></li>
													<li><a href ng-click="hideMulta=!hideMulta"><span class="glyphicon glyphicon-ok" aria-hidden="true" ng-show="!hideMulta"></span> Multa</a></li>
											<li role="presentation" class="dropdown-header">Datas</li>
												<li><a href ng-click="hideDataQuitar=!hideDataQuitar"><span class="glyphicon glyphicon-ok" aria-hidden="true" ng-show="!hideDataQuitar"></span> Data quitação</a></li>
												<li><a href ng-click="hideVencimento=!hideVencimento"><span class="glyphicon glyphicon-ok" aria-hidden="true" ng-show="!hideVencimento"></span> Vencimento</a></li>
											<li role="presentation" class="dropdown-header">Valores</li>
												<li><a href ng-click="hideValor=!hideValor"><span class="glyphicon glyphicon-ok" aria-hidden="true" ng-show="!hideValor"></span> Valor</a></li>
												<li><a href ng-click="hideTotal=!hideTotal"><span class="glyphicon glyphicon-ok" aria-hidden="true" ng-show="!hideTotal"></span> Total</a></li>
											<li role="presentation" class="dropdown-header">Ações</li>
												<li><a href ng-click="hideAcoes=!hideAcoes"><span class="glyphicon glyphicon-ok" aria-hidden="true" ng-show="!hideAcoes"></span> Ações</a></li>
										</ul></column>
									</div>
								</div>
							</div>
						</div>
						<div class="panel panel-default">
							<div class="panel-heading">Conta:</div>
							<div class="panel-body">
								<div class="row">
									<div class="col-sm-3">
										<input type="search" placeholder="Filtrar por Cliente/Fornecedor" ng-model="account.parceiro.Nome" class="form-control">
									</div>
									<div class="col-sm-1">
										<input type="search" placeholder="OS" ng-model="account.idOS" class="form-control">
									</div>
									<div class="col-sm-2">
										<input type="search" placeholder="Venc. dd/mm/aaaa" ng-model="vencimento" class="form-control" ng-change="dataVencimentoChange(vencimento)">
									</div>
									<div class="col-sm-2">
										<input type="search" placeholder="Valor mínimo" ng-model="valueMin" class="form-control" ng-change="valueMinChange(valueMin)">
									</div>
									<div class="col-sm-2">
										<input type="search" placeholder="Valor máximo" ng-model="valueMax" class="form-control" ng-change="valueMaxChange(valueMax)">
									</div>
									<div class="col-sm-2">
										<div ng-hide="true">Ocultando: {{_to-_from-resultAccount.length+1}}</div>
										Result. filtro: {{resultAccount.length}}<br>
										{{_from}} a {{_to}} de {{_total}}<br>
										Página {{_current_page}} de {{_last_page}}
									</div>
								</div>
								<div class="row bg-success">
									<div class="col-sm-2">
										<input type="checkbox" ng-model="selectedAll" ng-click="checkAll()" /> Selecionar tudo
									</div>
									<div class="col-sm-6">
										<input type="checkbox" ng-model="keepSelected" /> Manter itens selecionados quando usar filtrar
									</div>
								</div>
								<div class="row bg-info">
									<div class="col-sm-3"><a href ng-click="order('parceiro.Nome')">Cliente/Fornecedor</a></div>
									<div class="col-sm-1" ng-hide="hideidOS"><a href ng-click="order('idOS')">OS</a></div>
									<div class="col-sm-1" ng-hide="hideVencimento"><a href ng-click="order('DataVencimento')">Vencimento</a></div>
									<div class="col-sm-1 text-right" ng-show="showValor==true" ng-hide="hideValor">
										<a href ng-click="order('total')">Valor</a> <column ng-hide="!hideTotal && !hideValor"><a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><span class="caret"></span></a>
							            <ul class="dropdown-menu">
							              <li><a href ng-click="showValor=false; hideTotal=false; hideValor=true;">Substituir por total</a></li>
							            </ul></column>
							        </div>
									<div class="col-sm-1 text-right" ng-show="showValor==false" ng-hide="hideTotal">
										<a href ng-click="order('total')">Total{{linkatual}}</a> <column ng-hide="!hideTotal && !hideValor"><a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><span class="caret"></span></a>
							            <ul class="dropdown-menu">
							              <li><a href ng-click="showValor=true; hideTotal=true; hideValor=false;">Subistituir por valor</a></li>
							            </ul></column>
							        </div>
									<div class="col-sm-1 text-right" ng-hide="hideDesconto"><a href ng-click="order('Desconto')">Desconto</a></div>
									<div class="col-sm-1 text-right" ng-show="typeColumn=='adicional'" ng-hide="hideAdicional">
										<a href ng-click="order('Acrescimo')" ng-model="linkAtual" value="adicional">Adicional</a><column class="cloneColumn" ng-hide="!hideAdicional && !hideJuros && !hideMulta"><a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><span class="caret"></span></a>
							            <ul class="dropdown-menu">
							              <li ng-show="typeColumn!='adicional'"><a href ng-click="typeColumn='adicional'; hideAdicional=false;">Subistituir por adicional</a></li>
							              <li ng-show="typeColumn!='juros'"><a href ng-click="typeColumn='juros'; hideJuros=false; hideAdicional=(linkAtual=='adicional')">Subistituir por juros</a></li>
							              <li ng-show="typeColumn!='multa'"><a href ng-click="typeColumn='multa'; hideMulta=false;">Subistituir por multa</a></li>
							            </ul></column>
							        </div>
									<div class="col-sm-1 text-right" ng-show="typeColumn=='juros'" ng-hide="hideJuros">
										<a href ng-click="order('Juros')" ng-model="linkAtual" value="juros">Juros</a><column class="columnAdd"></column>
									</div>
									<div class="col-sm-1 text-right" ng-show="typeColumn=='multa'" ng-hide="hideMulta">
										<a href ng-click="order('Multa')" ng-model="linkAtual" value="multa">Multa</a><column class="columnAdd"></column>
									</div>
									<div class="col-sm-2" ng-hide="hideDataQuitar"><a href ng-click="order('DataQuitada')">Data Quitar</a></div>
									<div class="col-sm-8" ng-hide="hideNewAccount">Gerar nova conta</div>
									<div class="col-sm-1" ng-hide="hideAcoes">Ações</div>
									<div class="col-sm-1 text-right pull-right" ng-hide="hideAcoes"><column class="listMenuAdd"></column></div>
	 							</div>
								<div ng-repeat="account in listAccount | filter:priceRange | filter:account as resultAccount" on-filtered="">
									<div class="row" ng-class-odd="'gridPar'" ng-class-even="'gridImpar'">
										<div class="col-sm-3"><input type="checkbox" value="{{account.idConta}}" ng-model='account.selected' />
											<a href ng-click="personDetails(account.parceiro)" data-toggle="modal" data-target="#modelPersonDetalhe">{{account.parceiro.Nome}}</a>
										</div>
										<div class="col-sm-1 text-right" ng-hide="hideidOS">
										{{account.idOS}}
										</div>
										<div class="col-sm-1" ng-hide="hideVencimento">
										{{account.DataVencimento | dateTimeMysqlToBR | removeTime}}
										</div>
										<div class="col-sm-1 text-right" ng-show="showValor==true" ng-hide="hideValor">
										{{account.Valor | number:2 | comma2decimal}}
										</div>
										<div class="col-sm-1 text-right" ng-show="showValor==false" ng-init="account.total=account.Valor" ng-hide="hideTotal">
										{{getTotal(account) | number:2 | comma2decimal}}
										</div>
										<div class="col-sm-1" ng-init="account.Desconto=0" ng-hide="hideDesconto">
											<input type="text" ng-model="account.Desconto" class="form-control" typeof(value) >
										</div>
										<div class="col-sm-1" ng-init="account.Acrescimo=0" ng-show="typeColumn=='adicional'" ng-hide="hideAdicional">
				            				<input ng-init="account.Acrescimo=0" type="text" ng-model="account.Acrescimo" class="form-control" ng-change="getValor(account)" >
										</div>
										<div class="col-sm-1" ng-init="account.Juros=0" ng-show="typeColumn=='juros'" ng-hide="hideJuros">
				            				<input ng-init="account.Juros=0" type="text" ng-model="account.Juros" class="form-control" ng-change="getValor(account)" >
										</div>
										<div class="col-sm-1" ng-init="account.Multa=0" ng-show="typeColumn=='multa'" ng-hide="hideMulta">
				            				<input ng-init="account.Multa=0" type="text" ng-model="account.Multa" class="form-control" ng-change="getValor(account)" >
										</div>
										<div class="col-sm-2" ng-init="account.DataQuitada=(account.DataQuitada)?account.DataQuitada:'<?php echo e(date('d/m/Y')); ?>'" ng-hide="hideDataQuitar">
											<input type="text" ng-model="account.DataQuitada" class="form-control" >
										</div>
										<div class="col-sm-8" ng-init="account.newDate=(account.newDate)?account.newDate:''" ng-hide="hideNewAccount">
											<div class="col-sm-3"><input type="checkbox" ng-model="account.reprogram"> Nova conta vencimento
											</div>
											<div class="col-sm-3">
												<input type="text" ng-model="account.newDate" class="form-control" placeholder="dd/mm/aaaa">
											</div>
											<div class="col-sm-2" ng-hide="hideNewAccount">
												Valor
											</div>
											<div class="col-sm-3" ng-hide="hideNewAccount" ng-init="account.newValue=getAccountValue(account)">
												<input type="text" ng-model="account.newValue" class="form-control" >
											</div>
										</div>
										<div class="col-sm-1" ng-hide="hideAcoes">
											<a href ng-click="details(account)" class="btn btn-xs btn-info" data-toggle="modal" data-target="#modelAccountDetails">Detalhe</a>
										</div>
										<div class="col-sm-1" ng-hide="hideAcoes">
											<a href ng-click="quitar(account)" class="btn btn-xs btn-success">Quitar</a>
										</div>
									</div>
									<div class="row"></div>
								</div>
								<div class="row bg-success">
									<div class="col-sm-2">
										<input type="checkbox" ng-model="selectedAll" ng-click="checkAll()" /> Selecionar tudo
									</div>
									<div class="col-sm-6">
										<input type="checkbox" ng-model="keepSelected" /> Manter itens selecionados quando usar filtrar
									</div>
								</div>
							</div>
						</div>
						<div class="col-sm-12 text-center"><?php echo $account->appends(['total' => $total])->render(); ?></div>
					</div>
					<div class="panel panel-default" id="divSaveBottom"></div>
				</div>
			</div>
		</div>
	</div>
	<?php echo $__env->make("account::details", array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>
	<?php echo $__env->make("person::details", array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>

</div>
<script defer="defer">
$( ".listMenu" ).clone().prependTo( ".listMenuAdd" );
$( ".cloneButtons" ).clone().prependTo( "#divSaveBottom" );
$( ".cloneColumn" ).clone().prependTo( ".columnAdd" );
</script>
<?php $__env->stopSection(); ?>

<?php echo $__env->make('app', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>